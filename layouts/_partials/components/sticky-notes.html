{{/* partial dipanggil dengan: 
  {{ partial "components/card-by-category.html" (dict "category" "Sticky Note" "Site" .Site) }} 
*/}}

{{ $category := .category }}
{{ $site := .Site }}

{{ $noteMaps := dict
  "tip" "ğŸ’¡"
  "info" "â„¹ï¸"
  "success" "âœ…"
  "warning" "âš ï¸"
  "danger" "âŒ"
  "note" "ğŸ“"
  "abstract" "âš™ï¸"
  "todo" "â˜‘ï¸"
  "question" "â“"
  "important" "â€¼ï¸"
}}

{{ range $site.RegularPages }}
  {{ $categories := .Params.categories }}
  {{ if and $categories (in $categories $category) }}

    {{ $key := .Params.state | default "note" }}

    {{/* Cek apakah key ada di $noteMaps, kalau tidak pakai default emoji */}}
    {{ $icon := "ğŸ—’ï¸" }}
      {{ if eq $key "tip" }}        {{ $icon = "ğŸ’¡" }}
      {{ else if eq $key "info" }}  {{ $icon = "â„¹ï¸" }}
      {{ else if eq $key "success" }}{{ $icon = "âœ…" }}
      {{ else if eq $key "warning" }}{{ $icon = "âš ï¸" }}
      {{ else if eq $key "danger" }}{{ $icon = "âŒ" }}
      {{ else if eq $key "note" }}  {{ $icon = "ğŸ“" }}
      {{ else if eq $key "abstract" }}{{ $icon = "âš™ï¸" }}
      {{ else if eq $key "todo" }}  {{ $icon = "â˜‘ï¸" }}
      {{ else if eq $key "question" }}{{ $icon = "â“" }}
      {{ else if eq $key "important" }}{{ $icon = "â€¼ï¸" }}
    {{ end }}

    <div class="masonry__item notes" style="background-color: var(--bg-state-{{- $key -}}); border-color: var(--cl-state-{{- $key -}});">
      <a href="{{ .RelPermalink }}">
        <strong class="notes__title heading heading--4" style="color: var(--cl-state-{{- $key -}});">
          <span class="emoji">{{ with .Params.emoji }}{{ . }}{{ else }}{{ $icon }}{{ end }}</span>
          {{ .Title }}
        </strong>
        <div class="markdown notes__body">
          {{ .Content | safeHTML }}
          <strong>{{ partial "components/timeago.html" . }}</strong>
        </div>
      </a>
    </div>

  {{ end }}
{{ end }}
